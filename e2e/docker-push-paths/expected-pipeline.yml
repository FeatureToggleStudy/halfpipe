# Generated using halfpipe cli version 0.0.0-DEV
groups: []
resources:
- name: git
  type: git
  source:
    branch: master
    paths:
    - e2e/docker-push-paths
    private_key: ((github.private_key))
    uri: git@github.com:springernature/halfpipe.git
- name: Docker Registry
  type: docker-image
  source:
    password: verysecret
    repository: springerplatformengineering/halfpipe-fly
    username: rob
- name: Docker Registry (1)
  type: docker-image
  source:
    password: verysecret
    repository: springerplatformengineering/halfpipe-fly
    username: rob
resource_types: []
jobs:
- name: push to docker registry
  serial: true
  plan:
  - aggregate:
    - get: git
      trigger: true
    timeout: 1h
  - put: Docker Registry
    params:
      build: git/e2e/docker-push-paths/some/build/dir
      build_args:
        ARTIFACTORY_PASSWORD: ((artifactory.password))
        ARTIFACTORY_URL: ((artifactory.url))
        ARTIFACTORY_USERNAME: ((artifactory.username))
      dockerfile: git/e2e/docker-push-paths/dockerfiles/Dockerfile
      tag_as_latest: true
    timeout: 1h
    attempts: 1
- name: push to docker registry again
  serial: true
  plan:
  - aggregate:
    - get: git
      passed:
      - push to docker registry
      trigger: true
    timeout: 1h
  - put: Docker Registry (1)
    params:
      build: git/e2e/docker-push-paths
      build_args:
        ARTIFACTORY_PASSWORD: ((artifactory.password))
        ARTIFACTORY_URL: ((artifactory.url))
        ARTIFACTORY_USERNAME: ((artifactory.username))
      dockerfile: git/e2e/docker-push-paths/dockerfiles/Dockerfile
      tag_as_latest: true
    timeout: 1h
    attempts: 1

